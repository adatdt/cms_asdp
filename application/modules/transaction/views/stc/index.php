<style type="text/css">
    #toast-container>.toast-info {
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjCwsGFQNW5L6AAAAB70lEQVQ4y6WTTUuUYRSGr9fJYfADBTdRiJKC2GoWGS7MWkgELQNdWIhQWr9AMnVn0C8IpEUgs3ETwlSSqCRpC3GjjDKUbTR3hlbqwKhXi9FBp5kKOmfzfJz7nPt+znkgrznscP6bIv7H7PTbse+7n113no45dwZRwziv2aGBL8AlklRwm5o/UdqhllJaqaKKVkqpZedsQJClc4WnXKaY9ZwU1aRJ0B8s5gLeM8OHAuKucT24kSt4yWbj7ubxuM0u5Rf9kkG+ApXcA0bZBi5SV1h0AwHlDLJAN90sMEg5AQ2FATM8YZFDosSIEeWQRfqZzteykEnX3LDPSpsc88ADx2yy0j43/GzSULaCZfaQIMUz6pljlDgrvOA5c7wizgp1PGabT/ZZkcm+6rRthu1y2aQ9Rk6Gz4g9Jl22y7BtTrua0ZBgiihr9DJEYzASpLJdTQUjNDJEL2tEmSKRqdDhkeO2nNGUM962OO6RHZlNid+9kPMIv/0Hz/vDUiiCYI933OFv1s5EsHuC7nA2J1+99Tkns8eECpHKQ6gs2+l/INXORPAzgw2fJmWxkTOZIxafJmQYJ113wKh7PnDetGkTPrTaah+54oFp573vnlEHXHcSQ1415qYp5+20xLC3fOuWW77xpmFLvOtHU24as8nQL1XwN1quB9M5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTExLTExVDA2OjIxOjAzKzAwOjAwafrrfAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0xMS0xMVQwNjoyMTowMyswMDowMBinU8AAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC") !important;
    }

    /* #toast-container>.toast-warning {
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjCw0IIxqUZvXjAAAB4UlEQVQ4y42RT0hUYRTFf3fmmUE1aNauKat5IkGmgUW4KUIQRqqNhrkpQyhmFxRBEkiLIKpFYLNoYRBlWFAQFtrkvwhaBAWCLsKSqJiFi7BahNlp4czTee+NdVffPeeee8+9n+ELbSVFPSCijNJjWYqHTOc0pP2KAiiiAxrUqZUEV9Ut87Xo1qVi5YeVDsVv6mC4nTHFvGyt1nvvmD7omVJaDRDxFHVM2ByAajTIffr1QrUANsdTrjBPRol8jyp1aVhtANqkl4oDyFVfjm9XJ2i7XikG6IzG1KSzqgPF9UinA3Z36wSAWnQRNat/8YwAKtOUOrysXuklDhTVOBrShqJnvqBJ7ShARiOU2Kyv7PziPVTCXtptsoDc6FARaJxlWA9xSJK2twWt4lSjBdUErJTrkJpUHsDvKGv6wkda7Sv/CK3iMn+odXjPNR5rhOkVqo1t7OMWm7lrSnKcNvbgUrrs1yuAWd7l8p9M84ZmTnLEsQG5ZLjBa+Y9wS6qgXEyuTxKgtv85qgtGIAStLJlmYV1/AJK+Z5fgE88sYniC1aqV72qDOOcUIXLTsBl5n8FDfQBDTwPEeg6a3xYkilSQI8+M+Djfjjco8wHVlkjAI0a4YGP++ZwLDDBVd5Kghb/hL+PpcueI2pvgAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0xMS0xM1QwODozNToyNiswMDowMMzElc8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMTEtMTNUMDg6MzU6MjYrMDA6MDC9mS1zAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==") !important;
    } */
    #toast-container>.toast-warning {
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjCw0IKCMol6QgAAABDUlEQVQ4y72RoU7DUBSGvzOuw1KQGMzMTLHwDAsJCr8FwQsgETwCSdFgEDwDMIFpQxZEk4EZmRlBT94f0bKWjrImhB11v5v/v+f855pu2MHTrFqMUNJQDIASh0BrdGgt0XqG5pEDoMM1A+CAFGjzQBtI2c/5FtjjiCdw+WwD64NCroAe5/SAS7Yztj4oymZYNsgPuf/b4L7RCRPEMykXwMuc6wz2CMAEGAJQ8AozrM4QKFRQJ1KgkKC8pTemnPLOcY3jjE2mjDN3nL8SKqrtECnMT3GRYUZXse4WxPeK6TL74vnHWcpW0a9U67b7py25CvuFJP53wyEblZuPqsHKaON8eXVljlclqGEAY/QJmx1V8emyWOsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTEtMTNUMDg6NDA6MzUrMDA6MDD+lFELAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTExLTEzVDA4OjQwOjM1KzAwOjAwj8nptwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=") !important;
    }

    .mt-element-list .list-simple.mt-list-container {
        border-left: 1px solid;
        border-right: 1px solid;
        border-bottom: 1px solid;
        border-color: #e7ecf1;
        padding: 5px;
    }

    .mt-element-list .list-simple.mt-list-container ul>.mt-list-item {
        list-style: none;
        border-bottom: 1px solid;
        border-color: #e7ecf1;
        padding: 5px 0;
    }

    .max-height {
        height: 180px !important;
        overflow-y: scroll;
    }

    .max-height::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        background-color: #F5F5F5;
    }

    .max-height::-webkit-scrollbar {
        width: 12px;
        background-color: #F5F5F5;
    }

    .max-height::-webkit-scrollbar-thumb {
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);
        background-color: #555;
    }

    .pad-left {
        padding-left: 5px !important;
        padding-right: 5px !important;
    }

    .mt-element-list .list-simple.mt-list-head .list-title {
        margin: 0;
        padding-right: 0px;
    }

    .table>tbody>tr>td,
    .table>tbody>tr>th,
    .table>tfoot>tr>td,
    .table>tfoot>tr>th,
    .table>thead>tr>td,
    .table>thead>tr>th {
        padding: 4px;
        line-height: 1.42857;
        vertical-align: top;
        border-top: 1px solid #e7ecf1;
    }

    .mt-element-list .list-simple.mt-list-head {
        padding: 7px;
    }

    .padd-btn {
        padding: 0px 5px 0px 5px !important;
        font-size: 14px !important;
    }

    .portlet {
        margin-top: 0;
        margin-bottom: 10px;
        padding: 0;
        border-radius: 4px;
    }

    .page-header.navbar.navbar-fixed-top,
    .page-header.navbar.navbar-static-top {
        z-index: 1040;
    }

    .toast-top-center {
        top: 24px;
        left: 50%;
        margin: 0 auto 0 -225px;
    }

    .toast-top-center .toast-info {
        box-shadow: 0 0 5px #007984 !important;
        /* margin: 0 auto 0 -150px !important; */
    }

    #toast-container>.toast-info {
        margin: 0 0 6px !important;
    }

    .toast .toast-time {
        float: right;
        font-size: 12px;
        line-height: 24px;
    }

    .toast-info {
        background-color: #2f96b4;
        opacity: .85;
    }

    .toast-warning,
    .toast-error,
    .toast-success {
        width: 370px !important;
    }
</style>

<div class="page-content-wrapper">
    <div class="page-content">
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <?php echo '<a href="' . $url_home . '">' . $home . '</a>'; ?>
                    <i class="fa fa-circle"></i>
                </li>
                <li>
                    <span><?php echo $title; ?></span>
                </li>
            </ul>
            <div class="page-toolbar">
                <div id="dashboard-report-range" class="pull-right tooltips btn btn-sm" data-container="body" data-placement="bottom">
                    <span class="thin uppercase hidden-xs" id="datetime"></span>
                    <script type="text/javascript">
                        window.onload = date_time('datetime');
                    </script>
                </div>
            </div>
        </div>

        <div class="my-div-body">
            <div class="portlet box blue-madison">
                <div class="portlet-title">
                    <div class="caption"><?php echo $title ?> <b>(<?php echo $port_name?>)</b></div>
                </div>
                <div class="portlet-body" id="box-ui">
                    <div class="row">
                        <!-- <div class="col-md-12 form-inline">
                            <div class="input-group select2-bootstrap-prepend">
                                <div class="input-group-addon">Tanggal</div>
                                <input type="text" class="form-control date input-small" id="dateFrom" value="<?php //echo date('Y-m-d') 
                                                                                                                ?>" placeholder="YYYY-MM-DD"  autocomplete="off" readonly>
                            </div>    
                            <div class="input-group select2-bootstrap-prepend">
                               <div class="input-group-addon">Pelabuhan</div>
                                <?php //echo form_dropdown('', $port, '', 'id="port" class="form-control select2" data-placeholder="Pilih"'); 
                                ?>
                            </select>
                        </div> 

                        <div class="input-group ">
                            <button type="button" class="btn btn-small btn-primary" data-loading-text="<i class='fa fa-spinner fa-spin'></i>" title="Cari" id="searching" style="padding: 6px 12px; font-size: 14px">Cari</button>
                        </div>  -->
                        <!-- </div>
                    <hr><hr> -->

                        <button type="button" class="btn btn-small btn-primary hidden" data-loading-text="<i class='fa fa-spinner fa-spin'></i>" title="Cari" id="searching" disabled style="padding: 6px 12px; font-size: 14px">Cari</button>
                        <div id="data-not-found"></div>
                        <div class="col-md-12 pad-left">
                            <div class="col-md-3 pad-left">
                                <div class="table-scrollable" style="margin-top:0px !important">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th> Warna </th>
                                                <th> Keterangan </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="background-color: #F1C40F"></td>
                                                <td> Masuk Alur </td>
                                            </tr>
                                            <tr>
                                                <td style="background-color: #E87E04"></td>
                                                <td> Sandar </td>
                                            </tr>
                                            <tr>
                                                <td style="background-color: #337ab7"></td>
                                                <td> Mulai Pelayanan </td>
                                            </tr>
                                            <tr>
                                                <td style="background-color: #9A12B3"></td>
                                                <td> Selesai Pelayanan </td>
                                            </tr>
                                            <tr>
                                                <td style="background-color: #36c6d3"></td>
                                                <td> Tutup Rampdoor </td>
                                            </tr>
                                            <tr>
                                                <td style="background-color: #26C281"></td>
                                                <td> Berlayar </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div id="listDock"></div>

                        </div>
                        <hr>
                        <div class="col-md-12 hidden pad-left" id="listProblem">
                            <?php foreach ($problem as $key => $row) { ?>
                                <div class="col-md-3 pad-left">
                                    <div class="portlet box">
                                        <div class="portlet-body form">
                                            <div class="mt-element-list" style="position: relative;">
                                                <div class="mt-list-head list-simple font-white bg-red">
                                                    <div class="list-head-title-container">
                                                        <h5 class="list-title"><?php echo $row['title'] ?> <a href="javascript:;" class="ahref-problem" data-toggle="collapse" data-target="#p_<?php echo $key ?>"><i class="fa fa-angle-down pull-right" style="color: white;"></i></a></h5>
                                                    </div>
                                                </div>
                                                <div class="mt-list-container list-simple max-height" id="p_<?php echo $key ?>">
                                                    <ul class="sortable problem" data-problem="<?php echo $row['problem'] ?>" id="<?php echo $row['id'] ?>">
                                                    </ul>
                                                    <!-- <a href="javascript:;" class="btn btn-circle btn-icon-only blue btn-float" style="position: absolute;bottom: 20px;right: 20px" data-problem="<?php echo $row['problem'] ?>" onClick="showModal('<?php echo $url_problem ?>/<?php echo $this->enc->encode($this->enc->decode($row['problem']) .
                                                                                                                                                                                                                                                                                            "|" . $row['title']) ?>')"><i class="fa fa-plus"></i></a> -->
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            <?php } ?>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    var socket = io.connect('<?php echo $socket_url ?>');
    var client = new ClientJS(),
        browser_id = client.getFingerprint().toString();
    const uid = "<?php echo $this->session->userdata('port_id') . strtoupper($this->session->userdata('username')) ?>";

    $(document).ready(function() {
        socket.on('connect', function() {
            socket.emit("client_id", "PTCV" + browser_id + uid);
            toastr.clear();
            clearInterval(counter);
        });
        setTimeout(function() {
            $('.menu-toggler').trigger('click');
        }, 1);

        var options = {
            "closeButton": true,
            "newestOnTop": true,
            "positionClass": "toast-top-center",
            "timeOut": "0"
        }

        setInterval(function() {
            $('.toast-time').each(function() {
                $(this).text(pretty($(this).data('time')));
            });
        }, 10 * 1000);

        function textInfo(data) {
            var timestamp = new Date(data.created_on);
            var text = $('<strong>').html(data.dock_name);
            var t = $('<span>');
            t.append('Di ');
            t.append(text);
            t.append(' ' + data.message + '<br> oleh operator kapal (' + data.created_by + ')');
            t.append($('<span class="toast-time">')
                .data('time', timestamp.getTime())
                .text(pretty(timestamp.getTime()) || 'Baru saja'));

            return t;
        }

        socket.on('approve_manifest', function(data) {
            notifSound();
            toastr.info(textInfo(data), 'KMP. ' + data.ship_name.toUpperCase(), options).css("width", "450px");

            var desktopNotification = new Notify("KMP. " + data.ship_name.toUpperCase(), {
                body: "Di " + data.dock_name + " " + data.message,
                timeout: 10
            });

            desktopNotification.show();

        });

        socket.on('client_id', function(data) {
            if (data.status == 1) {
                $('.gate-status').each(function(i, obj) {
                    if ($(this).data('terminal') == data.terminal_code) {
                        $(this).removeClass('badge-danger').addClass('badge-success').html('Gate Connected');
                    }
                });
            } else {
                $('.gate-status').each(function(i, obj) {
                    if ($(this).data('terminal') == data.terminal_code) {
                        $(this).removeClass('badge-success').addClass('badge-danger').html('Gate Disconected');
                    }
                });
            }
        });

        socket.on('clients_status', function(data) {
            for (let key in data.terminal_code) {
                $('.gate-status').each(function(i, obj) {
                    if ($(this).data('terminal') == data.terminal_code[key]) {
                        $(this).removeClass('badge-danger').addClass('badge-success').html('Gate Connected');
                    }
                });
            }
        });

        socket.on('connect_error', (error) => {
            console.warn('Connection Error: ' + error);
        });
        socket.on('error', (error) => {
            console.error('Error: ' + error);
        });
        socket.on('reconnecting', (attemptNumber) => {
            clearInterval(counter);
            if (attemptNumber == 1) {
                toastr.error('Tidak ada koneksi ke server, hubungi teknisi!', 'Computer not connected', {
                    "timeOut": "10000"
                });
            }
            toastr.warning('menguhubungkan ke server<span id="countdown"></span>', 'Trying to reach server', {
                "preventDuplicates": true,
                "extendedTimeOut": "0",
                "timeOut": "0",
                "tapToDismiss": false,
                "onclick": false,
                "closeOnHover": false,
            });
            timeout = 21;
            counter = setInterval(timer, 1000);
            console.log('reconnecting...(' + attemptNumber + ')');
        });
        socket.on('disconnect', function() {
            console.warn('Disconnected from socket');
            // toastr.error('Tidak ada koneksi ke server, hubungi teknisi!', 'Computer not connected');
        });

        // countdown toasts connecting to server
        var timeout, counter;

        function timer() {
            timeout -= 1;
            if (timeout <= 0) {
                clearInterval(counter);
                document.getElementById("countdown").innerHTML = "..."
                return;
            }
            document.getElementById("countdown").innerHTML = " dalam " + timeout + " detik...";
        }

        $('.ahref-problem').trigger('click');

        // $('.date').datepicker({
        //     format: 'yyyy-mm-dd',
        //     changeMonth: true,
        //     changeYear: true,
        //     autoclose: true,
        // });

        // $(".problem").sortable({
        //     connectWith: '',
        //     revert: true,
        // });

        var listDermaga = function() {
            $.ajax({
                url: 'stc/list_dock',
                data: {
                    date: '<?php echo date('Y-m-d'); ?>',
                    // date : $('#dateFrom').val(),
                    port: '<?php echo $port_id; ?>',
                },
                type: 'POST',
                dataType: 'json',

                beforeSend: function() {
                    // $('#searching').button('loading');
                    $('#box-ui').block({
                        message: '<h4><i class="fa fa-spinner fa-spin"></i> Loading</h4>',
                        overlayCSS: {
                            opacity: 0.2
                        }
                    });
                },

                success: function(d) {
                    if (d.code) {
                        $('#listProblem').removeClass('hidden');
                        dataUL = d.data.schedule;
                        anchor = d.data.anchor;
                        docking = d.data.docking;
                        broken = d.data.broken;
                        html_dock = '';
                        // console.log(dataUL);
                        for (i in dataUL) {
                            // console.log(dataUL[i].schedule);
                            // for (j in dataUL[i].schedule) {
                            //     console.log(dataUL[i].schedule[j]);
                            // }
                            dataList = {
                                data: dataUL[i].schedule,
                                terminal_code: dataUL[i].gate,
                                name: i,
                                type: 'dock',
                                action: d.data.action,
                                identity_app: d.data.identity_app
                            }
                            // console.log(dataList);
                            html_dock += listDock(dataList);
                        }

                        if (anchor.length) {
                            html_a = ulLi({
                                data: anchor,
                            });
                        } else {
                            html_a = '<li class="mt-list-item""> tidak ada data</li>';
                        }

                        if (docking.length) {
                            html_d = ulLi({
                                data: docking,
                            });
                        } else {
                            html_d = '<li class="mt-list-item"> tidak ada data</li>';
                        }

                        if (broken.length) {
                            html_b = ulLi({
                                data: broken,
                            });
                        } else {
                            html_b = '<li class="mt-list-item"> tidak ada data</li>';
                        }

                        $('#list-anchor').html(html_a);
                        $('#list-docking').html(html_d);
                        $('#list-broken').html(html_b);

                        $('#listDock').html(html_dock);
                        $('#data-not-found').html('');
                    } else {
                        $('#listProblem').addClass('hidden');
                        $('#listDock').html('');
                        $('#data-not-found').html('<center><h3>Data not found</h3></center>');
                    }
                },

                error: function() {
                    console.log('Please contact the administrator');
                },

                complete: function() {
                    // $('#searching').button('reset');
                    $('#box-ui').unblock();
                }
            }).done(function() {
                // $(".drag").sortable({
                //     connectWith: ".problem",
                //     revert: true,
                //     stop: function(event, ui) {
                //         data = ui.item[0].dataset;                        
                //         data.type = ui.item[0].parentElement.dataset.problem;

                //         $.ajax({
                //             url         : 'stc/set_problem',
                //             data        : data,
                //             type        : 'POST',
                //             dataType    : 'json',

                //             beforeSend: function(){

                //             },

                //             success: function(d) {
                //                 if(d.code){
                //                     toastr.success(d.message, 'Sukses');
                //                 }

                //                 else{
                //                     toastr.error(d.message, 'Gagal');
                //                 }
                //             },

                //             error: function() {
                //                 console.log('Please contact the administrator');
                //             },

                //             complete: function(){
                //                 // $('#searching').trigger('click');
                //                 listDermaga()
                //             }
                //         });
                //     }
                // });
                $('.ahref').trigger('click');
            })
        }

        // $('#port').change(function(){
        //     $('#searching').prop('disabled',false)
        // })

        $('#searching').click(function() {
            listDermaga();
        })

        listDermaga();
        setInterval(function() {
            var today = new Date();
            var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
            if (time == '0:0:0') {
                listDermaga();
            }
        }, 1000)
    });

    function replaceAll(str, find, replace) {
        return str.replace(new RegExp(find, 'g'), replace);
    }

    function listDock(z) {
        // console.log(z.data)
        // str = z.name.replace(' ','_');
        terminal = z.terminal_code || 0;
        str = replaceAll(z.name, ' ', '_');
        html = '<div class="col-md-3 pad-left">\
            <div class="portlet box blue">\
                <div class="portlet-title">\
                    <div class="caption"> ' + z.name + '</div>\
                    <!--<div class="actions" style="padding: 9px 0">\
                        <span class="badge badge-danger gate-status" data-terminal="' + terminal + '"> Gate Disconected </span>\
                    </div>-->\
                </div>\
                <div class="portlet-body form">\
                    <div class="mt-element-list">\
                        <div class="mt-list-container list-simple max-height" id="' + str + '">\
                            <ul class="sortable drag">\
                                ' + ulLi(z) + '\
                            </ul>\
                        </div>\
                    </div>\
                </div>\
            </div>\
        </div>';
        return html;
    }

    function ulLi(x) {
        html = '';
        data = x.data;

        for (a in data) {
            ship_name = data[a].ship_name == null ? '' : data[a].ship_name;
            if (x.type == 'dock') {
                if (data[a].real_plot_date == null && data[a].real_dock_date == null && data[a].real_open_boarding_date == null) {
                    classBtn = 'class="btn btn-default padd-btn"';
                    dataPlot = 'data-ploting="1"'
                } else if (data[a].real_plot_date != null && data[a].real_dock_date == null)

                {
                    classBtn = 'class="btn btn-warning padd-btn"';
                    dataPlot = 'data-ploting="2"'
                } else if ((data[a].real_plot_date != null && data[a].real_dock_date != null && data[a].real_open_boarding_date == null) || (data[a].real_plot_date == null && data[a].real_dock_date != null && data[a].real_open_boarding_date == null))

                {
                    classBtn = 'class="btn yellow-gold padd-btn"';
                    dataPlot = 'data-ploting="3"'
                }
                // else if(data[a].real_open_boarding_date != null)

                // else if((data[a].real_plot_date != null && data[a].real_dock_date != null && data[a].real_open_boarding_date != null && data[a].real_close_boarding_date == null))
                else if ((data[a].real_open_boarding_date != null && data[a].real_plot_date == null) || (data[a].real_plot_date != null && data[a].real_dock_date != null && data[a].real_open_boarding_date != null && data[a].real_close_boarding_date == null))

                {
                    classBtn = 'class="btn btn-primary padd-btn"';
                    dataPlot = 'data-ploting="4"'
                } else if (data[a].real_plot_date != null && data[a].real_dock_date != null && data[a].real_open_boarding_date != null && data[a].real_close_boarding_date != null && data[a].real_ramp_door_date == null)

                {
                    classBtn = 'class="btn purple-seance padd-btn"';
                    dataPlot = 'data-ploting="5"'
                } else if (data[a].real_plot_date != null && data[a].real_dock_date != null && data[a].real_open_boarding_date != null && data[a].real_close_boarding_date != null && data[a].real_ramp_door_date != null && data[a].real_sail_close_date == null)

                {
                    classBtn = 'class="btn btn-success padd-btn"';
                    dataPlot = 'data-ploting="6"'
                } else {
                    classBtn = 'class="btn green-jungle padd-btn"';
                    dataPlot = 'data-ploting="7"'
                }

                if (data[a].real_sail_close_date == null) {
                    icon = '<i class="fa fa-edit" title="Edit"></i>';
                } else {
                    icon = '<i class="fa fa-file-o" title="Detail"></i>';
                }

                btn_edit = (x.action && x.identity_app) ? '<button type="button" ' + classBtn + ' onClick="showModal(\'' + data[a].url + '\')" ' + data[a].disabled + '>' + icon + '</button>' : '';

                html += '<li class="mt-list-item" ' + dataPlot + ' data-param="' + data[a].param + '">\
                <a href="javascript:;" ' + classBtn + ' style="width: 86%">' + ship_name + ' - ' + data[a].docking_time + ' </a> ' + btn_edit + '\
                </li>';
            } else {
                html += '<li class="mt-list-item" data-param="' + data[a].param + '">\
                <a href="javascript:;" class="btn btn-default padd-btn" style="width: 90%">' + ship_name + '</a>\
                </li>';
            }
        }

        return html
    }
</script>